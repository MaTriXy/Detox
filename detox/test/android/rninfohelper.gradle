import groovy.json.JsonSlurper

ext.getRNVersion = { workingDir ->
    println("RNInfo: workingDir=$workingDir")
    def jsonSlurper = new JsonSlurper()
    def packageFile = "$workingDir/../node_modules/react-native/package.json"
    println("RNInfo: reading $packageFile")
    Map<String, Object> packageJSON  = jsonSlurper.parse(new File(packageFile))
    String rnVersion = packageJSON.get('version')
    return rnVersion
}

ext.getMajorVersion = { semanticVersion ->
    Integer rnVersionMajor = semanticVersion.split('\\.')[1].toInteger()
    return rnVersionMajor
}
